document.addEventListener("DOMContentLoaded",function(){function o(t,n="",e=!1,l="",a=[],c=""){const d=new XMLHttpRequest;d.onreadystatechange=function(){if(4===d.readyState&&200===d.status){document.getElementsByClassName("lbcg-card")[0].innerHTML=d.responseText;let e;e=document.getElementById("lbcg-wrap-words-check").checked?1:"1-90"===t?"33.3px":"3x3"===n?"102px":"4x4"===n?"76.25px":"60.8px",document.documentElement.style.setProperty("--lbcg-grid-line-height",e),"1-75"!==t&&"1-90"!==t?checkGridFontSize():document.documentElement.style.setProperty("--lbcg-grid-font-size","1-90"!==t&&"1-75"===t?"31.5px":"16px"),toggleLoading(!1)}},d.open("post",LBCG.ajaxUrl,!0);let s=new FormData;s.append("action","lbcg_get_card_content"),s.append("card_type",t),s.append("card_grid_size",n),s.append("free_square",e?"true":"false"),s.append("card_title",l),s.append("spec_title",a.join(";")),s.append("card_content",c),d.send(s)}function t(){let e=document.getElementById("lbcg-body-content");const t=e.value.split("\n"),n=document.getElementsByName("bingo_grid_size")[0].value,l=document.getElementById("lbcg-bc-type").value;if("1-75"===l||"1-90"===l)return!0;let a=25;return"3x3"===n?a=9:"4x4"===n&&(a=16),t.filter(e=>""!==e).length<a?!(e.style.border="2px solid #b32d2e"):(e.style.border="1px solid #8c8f94",!0)}document.getElementById("lbcg-body-content").addEventListener("input",t),document.getElementById("bc-custom-css").addEventListener("change",function(e){e.preventDefault();let t=document.getElementById("lbcg-custom-css");if(null===t){t=document.createElement("style"),t.setAttribute("id","lbcg-custom-css"),t.setAttribute("type","text/css");const n=document.head||document.getElementsByTagName("head")[0];n.appendChild(t)}t.styleSheet?t.styleSheet.cssText=e.target.value:t.innerHTML=e.target.value}),document.getElementById("lbcg-bc-type").addEventListener("change",function(e){e.preventDefault(),toggleLoading(!0);const t=document.getElementById("lbcg-title").value,n=document.getElementById("lbcg-grid-size"),l=document.getElementsByName("bingo_grid_size")[0],a=document.getElementsByClassName("lbcg-input-wrap--subtitle")[0],c=document.getElementById("lbcg-body-content"),d=document.getElementById("lbcg-wrap-words-check"),s=document.getElementById("lbcg-free-space-check");switch(e.target.value){case"1-75":l.value="5x5",n.parentNode.style.display="none",a.parentNode.style.display="flex",c.parentNode.style.display="none",d.parentNode.style.display="none",s.parentNode.style.display="flex",o("1-75","5x5",s.checked,t,[...document.querySelectorAll(".lbcg-input-wrap--subtitle .lbcg-input")].map(e=>e.value));break;case"1-90":l.value="9x3",n.parentNode.style.display="none",a.parentNode.style.display="none",c.parentNode.style.display="none",d.parentNode.style.display="none",o("1-90","9x3",!(s.parentNode.style.display="none"),t);break;case"generic":l.value="3x3",n.value="3x3",n.parentNode.style.display="flex",a.parentNode.style.display="none",c.parentNode.style.display="flex",d.parentNode.style.display="flex",s.parentNode.style.display="flex",document.getElementById("content-items-count").innerText=9,o("generic","3x3",s.checked,t,[],c.value)}}),document.getElementById("publish").addEventListener("click",function(e){document.getElementById("lbcg-bc-type").value.length?t()?(e.preventDefault(),[...document.getElementsByClassName("lbcg-card-square-checked")].forEach(e=>e.classList.remove("lbcg-card-square-checked")),html2canvas(document.getElementsByClassName("lbcg-card")[0]).then(function(e){document.getElementsByName("bingo_card_thumbnail")[0].value=e.toDataURL(),document.getElementById("post").submit()})):(e.preventDefault(),alert("Please provide a minimum words/emojis or numbers quantity.")):(e.preventDefault(),alert("Please select bingo card type before save the post."))}),document.addEventListener("click",function(e){if(e.target.matches(".bc-image-admin")){e.preventDefault();const t=e.target.getAttribute("data-bct"),n=wp.media({title:"Insert image",library:{type:"image"},button:{text:"Use this image"},multiple:!1}).on("select",function(){var e=n.state().get("selection").first().toJSON();document.getElementById("bc-"+t+"-image").value=e.id,document.documentElement.style.setProperty("--lbcg-"+t+"-bg-image","url("+e.url+")")}).open()}else e.target.matches(".remove-bc-image-admin")&&(e.preventDefault(),e=e.target.getAttribute("data-bct"),document.getElementById("bc-"+e+"-image").value="",document.documentElement.style.setProperty("--lbcg-"+e+"-bg-image","none"))},!1)},!1);